---

hostname: "test"
tld: "smartrns.net"
secondarytlds:
  - "entroserv.de"
name: "testserver"
domain: "{{ name }}.{{ tld }}"
emaildomain: "{{ tld }}"
emailmaps:
  - { emaildomain: "entroserv.de", mx: "{{ domain }}" }
listmaps:
  - { emaildomain: "lists.smartrns.net", webdomain: "www.lists.smartrns.net", mx: '{{ domain }}' }
  - { emaildomain: "lists.entroserv.de", webdomain: "www.lists.entroserv.de", mx: '{{ domain }}' }

secondarydomains: "{{ emailmaps | map(attribute='mx') | unique | list }}"
secondaryemaildomains: "{{ emailmaps | map(attribute='emaildomain') | unique | list }}"
secondarylistwebdomains: "{{ listmaps | map(attribute='webdomain') | unique | list }}"
secondarylistemaildomains: "{{ listmaps | map(attribute='emaildomain') | unique | list }}"

alldomains: "{{ ( [ domain ] + secondarydomains + secondarylistwebdomains ) | unique | list }}"
allemaildomains: "{{ ( [ emaildomain ] + secondaryemaildomains + secondarylistemaildomains ) | unique | list }}"
allmaps: "{{ ( [ {'emaildomain': emaildomain , 'webdomain': domain , 'mx':  domain  } ] + emailmaps + listmaps ) | unique | list }}"
alltlds: "{{ ( [ tld ] + secondarytlds ) | unique | list }}"

tlsa: '311,201'

public_interface: "eth0"
myip: "{{ ansible_default_ipv4.address }}"  


